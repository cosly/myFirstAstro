name = "tesoro-crm-quotes"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = "./dist"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "tesoro-quotes-db"
database_id = "72959d9a-5a56-4f64-a96b-82edf076c2dc"

# R2 Storage (voor PDF's, handtekeningen, afbeeldingen)
[[r2_buckets]]
binding = "STORAGE"
bucket_name = "tesoro-quotes-storage"

# KV Namespace (voor sessies, caching)
[[kv_namespaces]]
binding = "KV"
id = "4a9874c88031497dbfea85f916cbb8ca"

# Vectorize Index (voor RAG en semantic search)
[[vectorize]]
binding = "VECTORIZE"
index_name = "tesoro-quotes-index"

# Note: Durable Objects are not directly supported in Pages.
# To use real-time presence tracking, deploy the QuotePresence Durable Object
# as a separate Worker and reference it here with script_name.
# For now, commenting out to allow Pages deployment.
#
# [[durable_objects.bindings]]
# name = "QUOTE_PRESENCE"
# class_name = "QuotePresence"
# script_name = "tesoro-presence-worker"  # Requires separate Worker deployment

# Environment variables
[vars]
ENVIRONMENT = "production"
APP_NAME = "Tesoro CRM Quotes"
APP_URL = "https://tesoro-quotes.pages.dev"
