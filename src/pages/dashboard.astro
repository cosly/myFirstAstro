---
import DashboardLayout from '../layouts/DashboardLayout.astro';

// Placeholder data - will come from database
const stats = [
  { label: 'Openstaande aanvragen', value: 3, change: '+2 deze week' },
  { label: 'Offertes verstuurd', value: 12, change: '+5 deze maand' },
  { label: 'Geaccepteerd', value: 8, change: '67% acceptatie' },
  { label: 'Omzet deze maand', value: '€12.450', change: '+23% vs vorige maand' },
];

const recentRequests = [
  { id: 1, company: 'Bakkerij De Korenschoof', type: 'Website', time: '2 uur geleden', status: 'new' },
  { id: 2, company: 'Autogarage Jansen', type: 'CRM Setup', time: '1 dag geleden', status: 'new' },
  { id: 3, company: 'Hotel Zeezicht', type: 'Marketing', time: '2 dagen geleden', status: 'pending' },
];

const recentQuotes = [
  { id: '2024-042', company: 'Hotel Zeezicht', amount: '€2.450', status: 'accepted' },
  { id: '2024-041', company: 'Bloemenwinkel Roos', amount: '€890', status: 'sent' },
  { id: '2024-040', company: 'Installatiebedrijf Groot', amount: '€3.200', status: 'sent' },
  { id: '2024-039', company: 'Bakkerij De Korenschoof', amount: '€1.650', status: 'draft' },
];

const statusColors = {
  new: 'bg-red-100 text-red-800',
  pending: 'bg-yellow-100 text-yellow-800',
  accepted: 'bg-green-100 text-green-800',
  sent: 'bg-blue-100 text-blue-800',
  draft: 'bg-gray-100 text-gray-800',
};

const statusLabels = {
  new: 'Nieuw',
  pending: 'In behandeling',
  accepted: 'Geaccepteerd',
  sent: 'Verstuurd',
  draft: 'Concept',
};
---

<DashboardLayout title="Dashboard">
  <div class="space-y-6">
    <!-- Header -->
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-2xl font-bold">Dashboard</h1>
        <p class="text-muted-foreground">Welkom terug! Hier is een overzicht van vandaag.</p>
      </div>
      <a
        href="/offertes/nieuw"
        class="inline-flex items-center gap-2 rounded-lg bg-tesoro-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-tesoro-600"
      >
        <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        Nieuwe Offerte
      </a>
    </div>

    <!-- Stats -->
    <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
      {stats.map((stat) => (
        <div class="rounded-xl border bg-card p-6">
          <p class="text-sm text-muted-foreground">{stat.label}</p>
          <p class="mt-2 text-3xl font-bold">{stat.value}</p>
          <p class="mt-1 text-xs text-muted-foreground">{stat.change}</p>
        </div>
      ))}
    </div>

    <!-- Two columns -->
    <div class="grid gap-6 lg:grid-cols-2">
      <!-- Recent Requests -->
      <div class="rounded-xl border bg-card">
        <div class="flex items-center justify-between border-b px-6 py-4">
          <h2 class="font-semibold">Nieuwe Aanvragen</h2>
          <a href="/aanvragen" class="text-sm text-tesoro-500 hover:underline">Bekijk alle</a>
        </div>
        <div class="divide-y">
          {recentRequests.map((request) => (
            <div class="flex items-center justify-between px-6 py-4">
              <div>
                <p class="font-medium">{request.company}</p>
                <p class="text-sm text-muted-foreground">{request.type} - {request.time}</p>
              </div>
              <div class="flex items-center gap-3">
                <span class:list={['rounded-full px-2 py-1 text-xs font-medium', statusColors[request.status]]}>
                  {statusLabels[request.status]}
                </span>
                <a
                  href={`/aanvragen/${request.id}`}
                  class="rounded-lg border px-3 py-1 text-sm transition-colors hover:bg-muted"
                >
                  Bekijk
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>

      <!-- Recent Quotes -->
      <div class="rounded-xl border bg-card">
        <div class="flex items-center justify-between border-b px-6 py-4">
          <h2 class="font-semibold">Recente Offertes</h2>
          <a href="/offertes" class="text-sm text-tesoro-500 hover:underline">Bekijk alle</a>
        </div>
        <div class="divide-y">
          {recentQuotes.map((quote) => (
            <div class="flex items-center justify-between px-6 py-4">
              <div class="flex items-center gap-4">
                <span class="text-sm font-mono text-muted-foreground">#{quote.id}</span>
                <p class="font-medium">{quote.company}</p>
              </div>
              <div class="flex items-center gap-3">
                <span class="font-medium">{quote.amount}</span>
                <span class:list={['rounded-full px-2 py-1 text-xs font-medium', statusColors[quote.status]]}>
                  {statusLabels[quote.status]}
                </span>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</DashboardLayout>
